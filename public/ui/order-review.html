<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>订单审核 - LIMS-XW</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC',
          'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
        background: #f5f7fa;
        min-height: 100vh;
        margin: 0;
      }

      .back-btn {
        padding: 8px 16px;
        background: white;
        color: #667eea;
        border: 1px solid #667eea;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        transition: all 0.2s;
      }

      .back-btn:hover {
        background: #667eea;
        color: white;
      }

      .user-avatar {
        width: 36px;
        height: 36px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
      }

      /* 主内容 */
      .main-content {
        padding: 20px;
        max-width: 1200px;
        margin: 0 auto;
      }

      /* 页面头部 */
      .order-header {
        background: white;
        border-radius: 12px;
        padding: 24px;
        margin-bottom: 20px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .order-title {
        display: flex;
        align-items: center;
        gap: 16px;
      }

      .order-number {
        font-size: 24px;
        font-weight: bold;
        color: #667eea;
      }

      .urgent-badge {
        padding: 6px 12px;
        background: #ef4444;
        color: white;
        border-radius: 20px;
        font-size: 14px;
        font-weight: bold;
      }

      .order-meta {
        display: flex;
        gap: 24px;
        color: #6b7280;
        font-size: 14px;
      }

      .meta-item {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      /* 信息卡片 */
      .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
      }

      .info-card {
        background: white;
        border-radius: 12px;
        padding: 24px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      .card-title {
        font-size: 16px;
        font-weight: 600;
        color: #1f2937;
        margin-bottom: 20px;
        padding-bottom: 12px;
        border-bottom: 1px solid #e5e7eb;
        display: flex;
        align-items: center;
      }

      .card-title::before {
        content: '';
        width: 4px;
        height: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        margin-right: 12px;
        border-radius: 2px;
      }

      .info-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .info-item {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        border-bottom: 1px solid #f3f4f6;
      }

      .info-item:last-child {
        border-bottom: none;
      }

      .info-label {
        color: #6b7280;
        font-size: 14px;
      }

      .info-value {
        color: #1f2937;
        font-size: 14px;
        font-weight: 500;
      }

      .info-value.amount {
        color: #059669;
        font-size: 16px;
        font-weight: bold;
      }

      /* 操作按钮 */
      .action-section {
        background: white;
        border-radius: 12px;
        padding: 24px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        display: flex;
        justify-content: center;
        gap: 20px;
      }

      .btn {
        padding: 12px 32px;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
        border: none;
      }

      .btn-approve {
        background: linear-gradient(135deg, #34d399 0%, #10b981 100%);
        color: white;
        flex: 1;
        max-width: 300px;
      }

      .btn-approve:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 16px rgba(16, 185, 129, 0.3);
      }

      .btn-reject {
        background: white;
        color: #ef4444;
        border: 2px solid #ef4444;
        flex: 1;
        max-width: 300px;
      }

      .btn-reject:hover {
        background: #fef2f2;
        transform: translateY(-2px);
        box-shadow: 0 8px 16px rgba(239, 68, 68, 0.2);
      }

      /* 弹窗 */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
      }

      .modal.active {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .modal-content {
        background: white;
        border-radius: 12px;
        width: 90%;
        max-width: 500px;
        padding: 24px;
        animation: slideUp 0.3s;
      }

      @keyframes slideUp {
        from {
          transform: translateY(20px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .modal-header {
        font-size: 18px;
        font-weight: 600;
        color: #1f2937;
        margin-bottom: 20px;
      }

      .modal-body {
        margin-bottom: 24px;
      }

      textarea {
        width: 100%;
        padding: 12px;
        border: 1px solid #e5e7eb;
        border-radius: 6px;
        font-size: 14px;
        resize: vertical;
        min-height: 120px;
      }

      textarea:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      .modal-footer {
        display: flex;
        justify-content: flex-end;
        gap: 12px;
      }

      .btn-secondary {
        background: white;
        color: #6b7280;
        border: 1px solid #e5e7eb;
      }

      .btn-secondary:hover {
        background: #f3f4f6;
      }

      .btn-danger {
        background: #ef4444;
        color: white;
      }

      .btn-danger:hover {
        background: #dc2626;
      }
    </style>
  </head>
  <body>
    <script src="navigation.js"></script>

    <!-- 主内容 -->
    <div class="main-content">
      <!-- 订单头部信息 -->
      <div class="order-header">
        <div class="order-title">
          <span class="order-number">XW250903-103</span>
          <span class="urgent-badge">加急</span>
        </div>
        <div class="order-meta">
          <div class="meta-item">
            <span>销售人员：</span>
            <strong>张三</strong>
          </div>
          <div class="meta-item">
            <span>提交时间：</span>
            <strong>2025-09-03 14:30</strong>
          </div>
        </div>
      </div>

      <!-- 信息卡片 -->
      <div class="info-grid">
        <!-- 客户信息 -->
        <div class="info-card">
          <h3 class="card-title">客户信息</h3>
          <div class="info-list">
            <div class="info-item">
              <span class="info-label">客户名称</span>
              <span class="info-value">深圳科技创新中心</span>
            </div>
            <div class="info-item">
              <span class="info-label">客户联系人</span>
              <span class="info-value">林总监</span>
            </div>
            <div class="info-item">
              <span class="info-label">客户联系电话</span>
              <span class="info-value">13900139001</span>
            </div>
          </div>
        </div>

        <!-- 检测信息 -->
        <div class="info-card">
          <h3 class="card-title">检测信息</h3>
          <div class="info-list">
            <div class="info-item">
              <span class="info-label">受检单位</span>
              <span class="info-value">创新中心A栋实验室</span>
            </div>
            <div class="info-item">
              <span class="info-label">采样地址</span>
              <span class="info-value">深圳市南山区科技园A栋5楼</span>
            </div>
            <div class="info-item">
              <span class="info-label">服务类型</span>
              <span class="info-value">初测</span>
            </div>
            <div class="info-item">
              <span class="info-label">检测类型</span>
              <span class="info-value" style="color: #059669; font-weight: 600"
                >50325-2020</span
              >
            </div>
            <div class="info-item">
              <span class="info-label">检测内容</span>
              <span class="info-value" style="color: #059669; font-weight: 500"
                >三苯五项：甲醛、苯、甲苯、二甲苯、TVOC</span
              >
            </div>
          </div>
        </div>

        <!-- 财务信息 -->
        <div class="info-card">
          <h3 class="card-title">财务信息</h3>
          <div class="info-list">
            <div class="info-item">
              <span class="info-label">项目金额</span>
              <span class="info-value amount">¥28,000</span>
            </div>
            <div class="info-item">
              <span class="info-label">已支付金额</span>
              <span class="info-value amount">¥10,000</span>
            </div>
            <div class="info-item">
              <span class="info-label">待收金额</span>
              <span class="info-value" style="color: #ea580c">¥18,000</span>
            </div>
          </div>
        </div>
      </div>

      <!-- 操作按钮 -->
      <div class="action-section">
        <button class="btn-approve btn" onclick="approveOrder()">
          审核通过
        </button>
        <button class="btn-reject btn" onclick="showRejectModal()">
          审核未通过
        </button>
      </div>
    </div>

    <!-- 驳回弹窗 -->
    <div class="modal" id="rejectModal">
      <div class="modal-content">
        <div class="modal-header">驳回订单</div>
        <div class="modal-body">
          <label
            style="
              display: block;
              margin-bottom: 8px;
              color: #374151;
              font-size: 14px;
            "
            >请输入驳回原因：</label
          >
          <textarea
            id="rejectReason"
            placeholder="请详细说明驳回原因..."
          ></textarea>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" onclick="closeRejectModal()">
            取消
          </button>
          <button class="btn-danger btn" onclick="rejectOrder()">
            确认驳回
          </button>
        </div>
      </div>
    </div>

    <script>
      // 设置页面标题
      document.addEventListener('DOMContentLoaded', () => {
        if (window.limsNav) {
          window.limsNav.setPageTitle('订单审核')
        }
      })

      // 审核通过
      function approveOrder() {
        if (confirm('确定要通过该订单的审核吗？')) {
          alert('订单审核已通过！')
          window.location.href = 'review-dashboard.html'
        }
      }

      // 显示驳回弹窗
      function showRejectModal() {
        document.getElementById('rejectModal').classList.add('active')
      }

      // 关闭驳回弹窗
      function closeRejectModal() {
        document.getElementById('rejectModal').classList.remove('active')
        document.getElementById('rejectReason').value = ''
      }

      // 驳回订单
      function rejectOrder() {
        const reason = document.getElementById('rejectReason').value.trim()
        if (!reason) {
          alert('请输入驳回原因！')
          return
        }

        alert('订单已驳回！\n驳回原因：' + reason)
        closeRejectModal()
        window.location.href = 'review-dashboard.html'
      }

      // 点击弹窗外部关闭
      document
        .getElementById('rejectModal')
        .addEventListener('click', function (e) {
          if (e.target === this) {
            closeRejectModal()
          }
        })
    </script>
  </body>
</html>
