<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>é‡‡æ ·å·¥ä½œå° - LIMS-XWç³»ç»Ÿ</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
      }

      body {
        font-family:
          -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC',
          'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
        background: #f5f7fa;
        min-height: 100vh;
      }

      .main-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      /* æ¬¢è¿åŒºåŸŸ */
      .welcome-section {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 16px;
        padding: 28px;
        margin-bottom: 24px;
        color: white;
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
      }

      .welcome-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
      }

      .welcome-text h2 {
        font-size: 28px;
        font-weight: 600;
        margin-bottom: 8px;
      }

      .welcome-text p {
        font-size: 16px;
        opacity: 0.9;
      }

      .current-time {
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        padding: 12px 20px;
        border-radius: 12px;
        font-size: 14px;
        font-weight: 500;
      }

      /* ç»Ÿè®¡å¡ç‰‡åŒºåŸŸ */
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        margin-bottom: 32px;
      }

      .stat-card {
        background: white;
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.04);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .stat-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 4px;
        height: 100%;
        background: linear-gradient(
          180deg,
          var(--card-color) 0%,
          transparent 100%
        );
      }

      .stat-card.today {
        --card-color: #667eea;
      }

      .stat-card.pending {
        --card-color: #f59e0b;
      }

      .stat-card.total {
        --card-color: #10b981;
      }

      .stat-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
      }

      .stat-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
      }

      .stat-icon {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
      }

      .stat-card.today .stat-icon {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      .stat-card.pending .stat-icon {
        background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      }

      .stat-card.total .stat-icon {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      }

      .stat-value {
        font-size: 36px;
        font-weight: 700;
        color: #1f2937;
        margin-bottom: 8px;
      }

      .stat-label {
        font-size: 14px;
        color: #6b7280;
        font-weight: 500;
      }

      .stat-change {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        padding: 4px 8px;
        background: #f0fdf4;
        color: #10b981;
        border-radius: 6px;
        font-size: 12px;
        font-weight: 600;
        margin-top: 12px;
      }

      .stat-change.negative {
        background: #fef2f2;
        color: #ef4444;
      }

      /* ä»»åŠ¡ç­›é€‰æ  */
      .filter-bar {
        background: white;
        border-radius: 12px;
        padding: 16px 20px;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        flex-wrap: wrap;
      }

      .filter-tabs {
        display: flex;
        gap: 8px;
      }

      .filter-tab {
        padding: 8px 16px;
        border: none;
        background: transparent;
        color: #6b7280;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        border-radius: 8px;
        transition: all 0.3s ease;
        position: relative;
      }

      .filter-tab:hover {
        background: #f3f4f6;
      }

      .filter-tab.active {
        color: #667eea;
        background: rgba(102, 126, 234, 0.08);
      }

      .filter-tab .badge {
        position: absolute;
        top: -4px;
        right: -4px;
        background: #ef4444;
        color: white;
        font-size: 10px;
        padding: 2px 6px;
        border-radius: 10px;
        font-weight: 600;
      }

      .sort-dropdown {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .sort-label {
        font-size: 14px;
        color: #6b7280;
      }

      .sort-select {
        padding: 8px 12px;
        border: 1px solid #e5e7eb;
        border-radius: 8px;
        font-size: 14px;
        color: #374151;
        background: white;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .sort-select:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      /* ä»»åŠ¡åˆ—è¡¨ */
      .task-list {
        display: grid;
        gap: 16px;
      }

      .task-card {
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        transition: all 0.3s ease;
        cursor: pointer;
        position: relative;
        overflow: hidden;
      }

      .task-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 4px;
        height: 100%;
        background: var(--status-color);
        transition: width 0.3s ease;
      }

      .task-card:hover::before {
        width: 6px;
      }

      .task-card.status-pending {
        --status-color: #f59e0b;
      }

      .task-card.status-ongoing {
        --status-color: #667eea;
      }

      .task-card.status-completed {
        --status-color: #10b981;
      }

      .task-card.urgent {
        background: linear-gradient(90deg, #fef3c7 0%, #ffffff 100%);
      }

      .task-card:hover {
        transform: translateX(4px);
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
      }

      .task-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 16px;
      }

      .task-number {
        font-size: 16px;
        font-weight: 600;
        color: #1f2937;
      }

      .task-badges {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .task-status {
        padding: 4px 10px;
        border-radius: 6px;
        font-size: 12px;
        font-weight: 600;
      }

      .status-pending {
        background: rgba(245, 158, 11, 0.1);
        color: #d97706;
      }

      .status-ongoing {
        background: rgba(102, 126, 234, 0.1);
        color: #667eea;
      }

      .status-completed {
        background: rgba(16, 185, 129, 0.1);
        color: #059669;
      }

      .urgent-badge {
        background: #fef3c7;
        color: #b45309;
        padding: 4px 8px;
        border-radius: 6px;
        font-size: 11px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .task-content {
        margin-bottom: 16px;
      }

      .task-company {
        font-size: 15px;
        color: #374151;
        margin-bottom: 8px;
        font-weight: 500;
      }

      .task-info {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .task-info-item {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
        color: #6b7280;
      }

      .task-info-icon {
        width: 16px;
        height: 16px;
        color: #9ca3af;
      }

      .task-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-top: 16px;
        border-top: 1px solid #f3f4f6;
      }

      .task-time {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 13px;
        color: #6b7280;
      }

      .task-time.urgent {
        color: #dc2626;
        font-weight: 600;
      }

      .task-action {
        padding: 6px 12px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        border-radius: 6px;
        font-size: 13px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .task-action:hover {
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
      }

      /* ç©ºçŠ¶æ€ */
      .empty-state {
        text-align: center;
        padding: 60px 20px;
        background: white;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
      }

      .empty-icon {
        width: 120px;
        height: 120px;
        margin: 0 auto 24px;
        background: linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 48px;
      }

      .empty-title {
        font-size: 20px;
        font-weight: 600;
        color: #1f2937;
        margin-bottom: 8px;
      }

      .empty-desc {
        font-size: 14px;
        color: #6b7280;
      }

      /* å“åº”å¼è®¾è®¡ */
      @media (max-width: 768px) {
        .main-container {
          padding: 12px;
        }

        .welcome-section {
          padding: 20px;
        }

        .welcome-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 16px;
        }

        .welcome-text h2 {
          font-size: 24px;
        }

        .stats-grid {
          grid-template-columns: 1fr;
          gap: 12px;
        }

        .filter-bar {
          flex-direction: column;
          align-items: stretch;
        }

        .filter-tabs {
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
        }

        .task-header {
          flex-direction: column;
          gap: 8px;
        }
      }

      /* åŠ è½½åŠ¨ç”» */
      @keyframes shimmer {
        0% {
          background-position: -468px 0;
        }
        100% {
          background-position: 468px 0;
        }
      }

      .skeleton {
        animation: shimmer 1.5s infinite;
        background: linear-gradient(
          to right,
          #f6f7f8 0%,
          #edeef1 20%,
          #f6f7f8 40%,
          #f6f7f8 100%
        );
        background-size: 468px 104px;
      }
    </style>
  </head>
  <body>
    <script src="navigation.js"></script>

    <div class="main-container">
      <!-- æ¬¢è¿åŒºåŸŸ -->
      <div class="welcome-section">
        <div class="welcome-header">
          <div class="welcome-text">
            <h2>ğŸ‘‹ æ¬¢è¿å›æ¥ï¼Œ<span id="userName">é‡‡æ ·å‘˜</span></h2>
            <p>ä»Šå¤©ä¹Ÿè¦åŠ æ²¹å·¥ä½œå“¦ï¼è®©æˆ‘ä»¬å¼€å§‹ä»Šå¤©çš„é‡‡æ ·ä»»åŠ¡å§</p>
          </div>
          <div class="current-time" id="currentTime">
            2024å¹´3æœˆ15æ—¥ æ˜ŸæœŸäº” 09:30
          </div>
        </div>
      </div>

      <!-- ç»Ÿè®¡å¡ç‰‡ -->
      <div class="stats-grid">
        <div class="stat-card today">
          <div class="stat-header">
            <div>
              <div class="stat-value" id="todayTasks">3</div>
              <div class="stat-label">ä»Šæ—¥ä»»åŠ¡</div>
            </div>
            <div class="stat-icon">ğŸ“‹</div>
          </div>
          <div class="stat-change"><span>â†‘</span> è¾ƒæ˜¨æ—¥ +2</div>
        </div>

        <div class="stat-card pending">
          <div class="stat-header">
            <div>
              <div class="stat-value" id="pendingTasks">5</div>
              <div class="stat-label">æœªå®Œæˆä»»åŠ¡</div>
            </div>
            <div class="stat-icon">â³</div>
          </div>
          <div class="stat-change negative"><span>â†‘</span> éœ€è¦å°½å¿«å¤„ç†</div>
        </div>

        <div class="stat-card total">
          <div class="stat-header">
            <div>
              <div class="stat-value" id="totalTasks">28</div>
              <div class="stat-label">æœ¬æœˆæ€»ä»»åŠ¡</div>
            </div>
            <div class="stat-icon">âœ…</div>
          </div>
          <div class="stat-change"><span>â†‘</span> å®Œæˆç‡ 82%</div>
        </div>
      </div>

      <!-- ä»»åŠ¡ç­›é€‰æ  -->
      <div class="filter-bar">
        <div class="filter-tabs">
          <button class="filter-tab active" data-status="all">å…¨éƒ¨ä»»åŠ¡</button>
          <button class="filter-tab" data-status="pending">
            å¾…å¤„ç†
            <span class="badge">5</span>
          </button>
          <button class="filter-tab" data-status="ongoing">è¿›è¡Œä¸­</button>
          <button class="filter-tab" data-status="completed">å·²å®Œæˆ</button>
        </div>

        <div class="sort-dropdown">
          <span class="sort-label">æ’åºï¼š</span>
          <select class="sort-select" id="sortSelect">
            <option value="urgent">ç´§æ€¥ç¨‹åº¦</option>
            <option value="time">è®¡åˆ’æ—¶é—´</option>
            <option value="created">åˆ›å»ºæ—¶é—´</option>
            <option value="status">ä»»åŠ¡çŠ¶æ€</option>
          </select>
        </div>
      </div>

      <!-- ä»»åŠ¡åˆ—è¡¨ -->
      <div class="task-list" id="taskList">
        <!-- ç´§æ€¥ä»»åŠ¡ -->
        <div
          class="task-card status-pending urgent"
          onclick="openTaskDetail('XW2024031501')"
        >
          <div class="task-header">
            <div class="task-number">XW2024031501</div>
            <div class="task-badges">
              <span class="urgent-badge">ç´§æ€¥</span>
              <span class="task-status status-pending">å¾…å¤„ç†</span>
            </div>
          </div>

          <div class="task-content">
            <div class="task-company">æ·±åœ³å¸‚æŸæŸè‡ªæ¥æ°´å…¬å¸</div>
            <div class="task-info">
              <div class="task-info-item">
                <svg
                  class="task-info-icon"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
                  ></path>
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
                  ></path>
                </svg>
                æ·±åœ³å¸‚å—å±±åŒºç§‘æŠ€å›­å—è·¯123å·
              </div>
              <div class="task-info-item">
                <svg
                  class="task-info-icon"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
                  ></path>
                </svg>
                ç”Ÿæ´»é¥®ç”¨æ°´å¸¸è§„æ£€æµ‹ - 8ä¸ªé‡‡æ ·ç‚¹
              </div>
            </div>
          </div>

          <div class="task-footer">
            <div class="task-time urgent">
              <svg
                width="16"
                height="16"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                ></path>
              </svg>
              ä»Šå¤© 09:00-11:00
            </div>
            <button class="task-action">æŸ¥çœ‹è¯¦æƒ…</button>
          </div>
        </div>

        <!-- è¿›è¡Œä¸­ä»»åŠ¡ -->
        <div
          class="task-card status-ongoing"
          onclick="openTaskDetail('XW2024031502')"
        >
          <div class="task-header">
            <div class="task-number">XW2024031502</div>
            <div class="task-badges">
              <span class="task-status status-ongoing">è¿›è¡Œä¸­</span>
            </div>
          </div>

          <div class="task-content">
            <div class="task-company">å¹¿å·å¸‚ç¯ä¿ç§‘æŠ€æœ‰é™å…¬å¸</div>
            <div class="task-info">
              <div class="task-info-item">
                <svg
                  class="task-info-icon"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
                  ></path>
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
                  ></path>
                </svg>
                å¹¿å·å¸‚å¤©æ²³åŒºä½“è‚²è¥¿è·¯88å·
              </div>
              <div class="task-info-item">
                <svg
                  class="task-info-icon"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
                  ></path>
                </svg>
                å·¥ä¸šåºŸæ°´æ£€æµ‹ - 5ä¸ªé‡‡æ ·ç‚¹
              </div>
            </div>
          </div>

          <div class="task-footer">
            <div class="task-time">
              <svg
                width="16"
                height="16"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                ></path>
              </svg>
              ä»Šå¤© 14:00-16:00
            </div>
            <button class="task-action">æŸ¥çœ‹è¯¦æƒ…</button>
          </div>
        </div>

        <!-- å¾…å¤„ç†ä»»åŠ¡ -->
        <div
          class="task-card status-pending"
          onclick="openTaskDetail('XW2024031503')"
        >
          <div class="task-header">
            <div class="task-number">XW2024031503</div>
            <div class="task-badges">
              <span class="task-status status-pending">å¾…å¤„ç†</span>
            </div>
          </div>

          <div class="task-content">
            <div class="task-company">ä¸œèå¸‚åˆ¶é€ å·¥ä¸šå›­</div>
            <div class="task-info">
              <div class="task-info-item">
                <svg
                  class="task-info-icon"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
                  ></path>
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
                  ></path>
                </svg>
                ä¸œèå¸‚é•¿å®‰é•‡å·¥ä¸šå¤§é“268å·
              </div>
              <div class="task-info-item">
                <svg
                  class="task-info-icon"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
                  ></path>
                </svg>
                ç¯å¢ƒç©ºæ°”è´¨é‡æ£€æµ‹ - 12ä¸ªé‡‡æ ·ç‚¹
              </div>
            </div>
          </div>

          <div class="task-footer">
            <div class="task-time">
              <svg
                width="16"
                height="16"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                ></path>
              </svg>
              æ˜å¤© 09:00-12:00
            </div>
            <button class="task-action">æŸ¥çœ‹è¯¦æƒ…</button>
          </div>
        </div>

        <!-- å·²å®Œæˆä»»åŠ¡ -->
        <div
          class="task-card status-completed"
          onclick="openTaskDetail('XW2024031504')"
        >
          <div class="task-header">
            <div class="task-number">XW2024031504</div>
            <div class="task-badges">
              <span class="task-status status-completed">å·²å®Œæˆ</span>
            </div>
          </div>

          <div class="task-content">
            <div class="task-company">ä½›å±±å¸‚é£Ÿå“åŠ å·¥å‚</div>
            <div class="task-info">
              <div class="task-info-item">
                <svg
                  class="task-info-icon"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
                  ></path>
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
                  ></path>
                </svg>
                ä½›å±±å¸‚é¡ºå¾·åŒºåŒ—æ»˜é•‡ç¾é£Ÿè¡—18å·
              </div>
              <div class="task-info-item">
                <svg
                  class="task-info-icon"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
                  ></path>
                </svg>
                é£Ÿå“å®‰å…¨æ£€æµ‹ - 6ä¸ªé‡‡æ ·ç‚¹
              </div>
            </div>
          </div>

          <div class="task-footer">
            <div class="task-time">
              <svg
                width="16"
                height="16"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                ></path>
              </svg>
              æ˜¨å¤©å·²å®Œæˆ
            </div>
            <button class="task-action">æŸ¥çœ‹è¯¦æƒ…</button>
          </div>
        </div>
      </div>

      <!-- ç©ºçŠ¶æ€ï¼ˆå½“æ²¡æœ‰ä»»åŠ¡æ—¶æ˜¾ç¤ºï¼‰ -->
      <div class="empty-state" id="emptyState" style="display: none">
        <div class="empty-icon">ğŸ‰</div>
        <div class="empty-title">æš‚æ— ä»»åŠ¡</div>
        <div class="empty-desc">å½“å‰æ²¡æœ‰éœ€è¦å¤„ç†çš„é‡‡æ ·ä»»åŠ¡ï¼Œä¼‘æ¯ä¸€ä¸‹å§~</div>
      </div>
    </div>

    <script>
      // è®¾ç½®é¡µé¢æ ‡é¢˜
      document.addEventListener('DOMContentLoaded', () => {
        if (window.limsNav) {
          window.limsNav.setPageTitle('é‡‡æ ·å·¥ä½œå°')
        }

        // è·å–ç”¨æˆ·ä¿¡æ¯
        const username = sessionStorage.getItem('username') || 'é‡‡æ ·å‘˜'
        document.getElementById('userName').textContent = username

        // æ›´æ–°å½“å‰æ—¶é—´
        updateCurrentTime()
        setInterval(updateCurrentTime, 60000) // æ¯åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡

        // åˆå§‹åŒ–ç­›é€‰å’Œæ’åº
        initializeFilters()

        // åŠ è½½ä»»åŠ¡æ•°æ®
        loadTasks()
      })

      // æ›´æ–°å½“å‰æ—¶é—´
      function updateCurrentTime() {
        const now = new Date()
        const options = {
          year: 'numeric',
          month: 'numeric',
          day: 'numeric',
          weekday: 'long',
          hour: '2-digit',
          minute: '2-digit'
        }
        const timeString = now.toLocaleString('zh-CN', options)
        document.getElementById('currentTime').textContent = timeString
      }

      // åˆå§‹åŒ–ç­›é€‰å™¨
      function initializeFilters() {
        // çŠ¶æ€ç­›é€‰
        const filterTabs = document.querySelectorAll('.filter-tab')
        filterTabs.forEach(tab => {
          tab.addEventListener('click', function () {
            // ç§»é™¤æ‰€æœ‰activeç±»
            filterTabs.forEach(t => t.classList.remove('active'))
            // æ·»åŠ activeç±»åˆ°å½“å‰tab
            this.classList.add('active')

            // ç­›é€‰ä»»åŠ¡
            const status = this.dataset.status
            filterTasks(status)
          })
        })

        // æ’åºé€‰æ‹©
        document
          .getElementById('sortSelect')
          .addEventListener('change', function () {
            sortTasks(this.value)
          })
      }

      // ç­›é€‰ä»»åŠ¡
      function filterTasks(status) {
        const tasks = document.querySelectorAll('.task-card')
        let hasVisibleTasks = false

        tasks.forEach(task => {
          if (status === 'all') {
            task.style.display = 'block'
            hasVisibleTasks = true
          } else {
            const taskStatus = task.classList.contains(`status-${status}`)
            task.style.display = taskStatus ? 'block' : 'none'
            if (taskStatus) hasVisibleTasks = true
          }
        })

        // æ˜¾ç¤ºæˆ–éšè—ç©ºçŠ¶æ€
        document.getElementById('emptyState').style.display = hasVisibleTasks
          ? 'none'
          : 'block'
      }

      // æ’åºä»»åŠ¡
      function sortTasks(sortBy) {
        const taskList = document.getElementById('taskList')
        const tasks = Array.from(taskList.querySelectorAll('.task-card'))

        tasks.sort((a, b) => {
          switch (sortBy) {
            case 'urgent':
              // ç´§æ€¥ä»»åŠ¡ä¼˜å…ˆ
              const aUrgent = a.classList.contains('urgent') ? 0 : 1
              const bUrgent = b.classList.contains('urgent') ? 0 : 1
              return aUrgent - bUrgent
            case 'time':
              // æŒ‰æ—¶é—´æ’åºï¼ˆè¿™é‡Œéœ€è¦å®é™…çš„æ—¶é—´æ•°æ®ï¼‰
              return 0
            case 'status':
              // æŒ‰çŠ¶æ€æ’åºï¼šå¾…å¤„ç† > è¿›è¡Œä¸­ > å·²å®Œæˆ
              const statusOrder = { pending: 0, ongoing: 1, completed: 2 }
              const aStatus = a.classList.contains('status-pending')
                ? 'pending'
                : a.classList.contains('status-ongoing')
                  ? 'ongoing'
                  : 'completed'
              const bStatus = b.classList.contains('status-pending')
                ? 'pending'
                : b.classList.contains('status-ongoing')
                  ? 'ongoing'
                  : 'completed'
              return statusOrder[aStatus] - statusOrder[bStatus]
            default:
              return 0
          }
        })

        // é‡æ–°æ’åˆ—ä»»åŠ¡
        tasks.forEach(task => taskList.appendChild(task))
      }

      // åŠ è½½ä»»åŠ¡æ•°æ®
      function loadTasks() {
        // è¿™é‡Œåº”è¯¥ä»åç«¯APIè·å–æ•°æ®
        // ç°åœ¨ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
        updateStatistics()
      }

      // æ›´æ–°ç»Ÿè®¡æ•°æ®
      function updateStatistics() {
        // æ¨¡æ‹Ÿæ•°æ®ï¼Œå®é™…åº”ä»åç«¯è·å–
        const stats = {
          today: 3,
          pending: 5,
          total: 28
        }

        document.getElementById('todayTasks').textContent = stats.today
        document.getElementById('pendingTasks').textContent = stats.pending
        document.getElementById('totalTasks').textContent = stats.total
      }

      // æ‰“å¼€ä»»åŠ¡è¯¦æƒ…
      function openTaskDetail(taskId) {
        // ä¿å­˜ä»»åŠ¡IDåˆ°sessionStorage
        sessionStorage.setItem('currentTaskId', taskId)
        // è·³è½¬åˆ°ä»»åŠ¡è¯¦æƒ…é¡µ
        window.location.href = 'sampling-task-detail.html'
      }
    </script>
  </body>
</html>
